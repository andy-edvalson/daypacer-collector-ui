<!DOCTYPE html>
<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <style>
      .formField {
        display: block;
        padding: 0.5em;
      }

      .formField label {
        display: inline-block;
        width: 6em;
      }

      .formfield input {
        display: inline-block;
        width: 22em;
      }
    </style>

    <script type="text/javascript">

    $(function() {
      $( "form" ).submit(function( event ) {
        let formData = $( this ).serializeArray();
        let postData = {};
        $.each(formData, (num) => {
          postData[formData[num].name] = formData[num].value
        })

        console.log(postData)

        $.ajax({
          type: 'POST',
          url: 'https://b2bs80vdrl.execute-api.us-west-2.amazonaws.com/Prototype/call',
          data: JSON.stringify(postData),
          dataType: 'json',
          error: function(jqXHR, textStatus, errorThrown) {
              console.log(textStatus, errorThrown); //error logging
          },
          success: function(data) {
            $('#output').html(JSON.stringify(data.response))
          }
        })

        event.preventDefault();
      });
    })

    </script>

  </head>
  <body>
    <h1>Daypacer Calls</h1>

    <a href="index.html">Back to Call List</a>

    <hr/>

    <form method="POST" action="">
      <div class="formField">
        <label for="txtFirstName">First Name</label>
        <input type="text" id="txtFirstName" name="first_name" />
      </div>

      <div class="formField">
        <label for="txtLastName">Last Name</label>
        <input type="text" id="txtLastName" name="last_name" />
      </div>

      <div class="formField">
        <label for="txtPhone">Phone</label>
        <input type="text" id="txtPhone" name="phone" />
      </div>

      <div class="formField">
        <label for="txtCity">City</label>
        <input type="text" id="txtCity" name="city" />
      </div>

      <div class="formField">
        <label for="txtState">State</label>
        <input type="text" id="txtState" name="state" />
      </div>

      <div class="formField">
        <label for="txtZip">Zip Code</label>
        <input type="text" id="txtZip" name="zip" />
      </div>

      <div class="formField">
        <label for="txtVendor">Vendor</label>
        <input type="text" id="txtVendor" name="vendor" />
      </div>

      <div class="formField">
        <label for="txtUrl">URL</label>
        <input type="text" id="txtUrl" name="url" />
      </div>

      <div class="formField">
        <label for="txtIp">IP Address</label>
        <input type="text" id="txtIp" name="ip" />
      </div>

      <input type="submit" />
    </form>

    <pre style="white-space: pre" id="output"></pre>

  </body>
</html>
